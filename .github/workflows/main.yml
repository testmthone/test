name: Deploy with Debugging

on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    runs-on: self-hosted

    steps:
      # AdÄ±m 1: Kodu indir
      - name: Checkout Repository Code
        uses: actions/checkout@v4

      # AdÄ±m 2: HATA AYIKLAMA ADIMI - DosyalarÄ±n nerede olduÄŸunu kontrol et
      - name: Check File Structure
        run: |
          echo "###########################################"
          echo "Ã‡alÄ±ÅŸma alanÄ±nÄ±n iÃ§eriÄŸi:"
          ls -lR
          echo "###########################################"

      # AdÄ±m 3: Deployment betiÄŸini Ã§alÄ±ÅŸtÄ±r
      - name: Run Deployment Script
        run: |
          echo "ğŸš€ Deployment betiÄŸi Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor..."
          # Bu satÄ±r hala hata verecek ama yukarÄ±daki loglar bize nedenini sÃ¶yleyecek
          chmod +x deploy.sh
          ./deploy.sh
          echo "âœ… Deployment script'i tamamlandÄ±."