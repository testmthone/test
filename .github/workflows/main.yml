# Workflow'un adÄ±
name: Deploy to Server via Self-Hosted Runner

# Tetikleyici: main veya master dalÄ±na push yapÄ±ldÄ±ÄŸÄ±nda
on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    # Kendi sunucumuzdaki agent'Ä± kullan diyoruz
    runs-on: self-hosted

    steps:
      # AdÄ±m 1: Proje kodunu GitHub'dan agent'Ä±n Ã§alÄ±ÅŸma alanÄ±na indir.
      # Bu adÄ±m, deponuzdaki TÃœM dosyalarÄ± (deploy.sh, docker-compose.yml vb.)
      # agent'Ä±n bulunduÄŸu geÃ§ici klasÃ¶re kopyalar.
      - name: Checkout Repository Code
        uses: actions/checkout@v4

      # AdÄ±m 2: Deployment betiÄŸini Ã§alÄ±ÅŸtÄ±r.
      # ArtÄ±k deploy.sh dosyasÄ± bu Ã§alÄ±ÅŸma alanÄ±nda mevcut!
      - name: Run Deployment Script
        run: |
          echo "ğŸš€ Deployment betiÄŸi Ã§alÄ±ÅŸtÄ±rÄ±lÄ±yor..."
          # deploy.sh'i Ã§alÄ±ÅŸtÄ±rÄ±labilir yap ve Ã§alÄ±ÅŸtÄ±r
          chmod +x deploy.sh
          ./deploy.sh
          echo "âœ… Deployment script'i tamamlandÄ±."