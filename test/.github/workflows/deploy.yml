# Workflow'un adÄ±
name: Deploy Portfolio Project

# Tetikleyici: main veya master dalÄ±na push yapÄ±ldÄ±ÄŸÄ±nda
on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    # Sadece 'self-hosted' demeniz yeterli. Agent'Ä±nÄ±z bu iÅŸi otomatik olarak alacaktÄ±r.
    runs-on: self-hosted

    steps:
    - name: Deploy Project
      # SSH ile ilgili her ÅŸeyi siliyoruz!
      # Komutlar zaten sunucunun iÃ§inde olduÄŸu iÃ§in doÄŸrudan Ã§alÄ±ÅŸÄ±yor.
      run: |
        # set -e: herhangi bir komut hata verirse script'i anÄ±nda durdurur (gÃ¼venlik iÃ§in)
        set -e
        
        echo "ğŸš€ Deployment basliyor..."
        
        # Projenin sunucudaki tam yoluna gidiyoruz
        # NOT: Bu klasÃ¶rÃ¼n sunucuda var olduÄŸundan emin olun!
        cd /var/www/portfolio
        
        echo "ğŸ“¥ Guncellemeler GitHub'dan cekiliyor..."
        git pull origin main
        
        echo "ğŸ”§ Deployment betigi calistiriliyor..."
        # EÄŸer projenizde deploy.sh dosyasÄ± varsa bu satÄ±rlar kalmalÄ±
        chmod +x deploy.sh
        ./deploy.sh
        
        echo "âœ… Deployment tamamlandi!"